{{#if errorMessages}}
  {{#each errorMessages as |currentError|}}
    {{ui-message
      type='error'
      closeable=true
      visible=true
      title='Error occurred'
      message=currentError
    }}
  {{/each}}
{{/if}}
<table class="object-list-view ui unstackable celled {{if readonly 'readonly'}} {{tableClass}} table">
  <thead>
    <tr>
      <th class="object-list-view-operations collapsing {{unless showHelperColumn 'hidden'}}" data-olv-header-property-name="OlvRowToolbar"></th>
        {{#each columns as |column|}}
          <th class="dt-head-left me class" onclick={{ action "headerCellClick" column }}>
            <div data-olv-header-property-name={{column.propName}} title="Click to change ordering, Ctrl+Click to append ordering for this column">
              <span>
              {{#if column.keyLocale}}
                {{t column.keyLocale}}
              {{else}}
                {{column.header}}
              {{/if}}
              </span>
              {{#if column.sorted}}
                <div style="float:right;">
                  {{#if column.sortAscending}}
                    <div title="Order ascending">
                    ▲{{column.sortNumber}}
                    </div>
                  {{else}}
                    <div title="Order descending">
                    ▼{{column.sortNumber}}
                    </div>
                  {{/if}}
                </div>
              {{/if}}
            </div>
          </th>
        {{/each}}
      {{#if showMenuColumn}}
        <th class="object-list-view-menu collapsing" data-olv-header-property-name="OlvRowMenu"></th>
      {{/if}}
    </tr>
  </thead>
  <tbody>
    {{#if showFilters}}
      <tr>
        <td rowspan="2" class="{{unless (and showHelperColumn hasContent) 'hidden'}}"></td>
        {{#each columns as |column|}}
          <td>
            {{#if column.filter.conditions}}
              {{component "flexberry-dropdown"
                value=column.filter.condition
                items=column.filter.conditions
                class="compact fluid"
                placeholder=""
                needChecksOnValue=false
              }}
            {{/if}}
          </td>
        {{/each}}
        {{#if showMenuColumn}}
          <td rowspan="2"></td>
        {{/if}}
      </tr>
      <tr>
        {{#each columns as |column|}}
          <td>
            {{#if column.filter.component.name}}
              {{component column.filter.component.name
                value=column.filter.pattern
                dynamicProperties=column.filter.component.properties
              }}
            {{/if}}
          </td>
        {{/each}}
      </tr>
    {{/if}}
    {{#unless hasContent}}
      <tr>
        <td colspan="{{colspan}}" style="text-align:center;">{{placeholder}}</td>
      </tr>
    {{/unless}}
    {{#each contentWithKeys key="key" as |record|}}
      {{object-list-view-row
        record=record
        columns=columns
        readonly=readonly
        required=required
        showMenuColumn=showMenuColumn
        showHelperColumn=showHelperColumn
        defaultRowConfig=defaultRowConfig
        showAsteriskInRow=showAsteriskInRow
        showCheckBoxInRow=showCheckBoxInRow
        showDeleteButtonInRow=showDeleteButtonInRow
        hierarchicalIndent=hierarchicalIndent
        inHierarchicalMode=inHierarchicalMode
        loadRecords=loadRecords
        rowClick=(action "rowClick")
        selectRow=(action "selectRow")
        deleteRow=(action "deleteRow")
      }}
    {{/each}}
  </tbody>
</table>
