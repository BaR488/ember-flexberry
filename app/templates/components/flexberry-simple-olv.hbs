{{#if refreshButton}}
  <button class="ui {{buttonClass}} button" {{action "refresh"}}>
    {{t "components.olv-toolbar.refresh-button-text"}}
  </button>
{{/if}}
{{#if createNewButton}}
  <button class="ui {{buttonClass}} {{if enableCreateNewButton "" "disabled"}} button" {{action "createNew"}}>
    {{t "components.olv-toolbar.add-button-text"}}
  </button>
{{/if}}
{{#if deleteButton}}
  <button class="ui {{buttonClass}} {{if isDeleteButtonEnabled "" "disabled"}} button" {{action "delete"}}>
    {{t "components.olv-toolbar.delete-button-text"}}
  </button>
{{/if}}
{{#if availableHierarchicalMode}}
  <button class="ui button icon {{buttonClass}} {{if inHierarchicalMode "active"}}" {{action "switchHierarchicalMode"}}>
    <i class="sitemap icon"></i>
  </button>
{{/if}}
{{#if enableFilters}}
  <div class="ui icon input buttons">
    <button class="ui button {{buttonClass}} {{if showFilters "active"}}" {{action "toggleStateFilters"}}>
      <i class="filter icon"></i>
    </button>
    {{#if filters}}
      <div class="or" data-text="&bull;"></div>
      <button class="ui button {{buttonClass}}" {{action "resetFilters"}}>
        <i class="remove icon"></i>
      </button>
    {{/if}}
  </div>
{{/if}}
{{#if filterButton}}
  <div class="ui action input">
    {{input
      type="text"
      placeholder=(t "components.olv-toolbar.filter-by-any-match-placeholder")
      value=filterByAnyMatchText enter="filterByAnyMatch"
    }}
    <button class="ui {{buttonClass}} icon button" {{action "filterByAnyMatch"}}>
      <i class="search icon"></i>
    </button>
    <button class="ui {{buttonClass}} icon button" {{action "removeFilter"}}>
      <i class="remove icon"></i>
    </button>
  </div>
{{/if}}
{{#if colsConfigButton}}
  <div class="ui buttons">
    <button class="ui icon button" {{action "showConfigDialog"}}>
      <i class="large table icon"></i>
    </button>
    {{#if colsSettingsItems}}
      {{flexberry-menu
        items=colsSettingsItems
        onItemClick=(action "onMenuItemClick")
      }}
    {{/if}}
  </div>
{{/if}}
{{#each customButtons as |customButton|}}
  <button
    class="ui {{if customButton.buttonClasses customButton.buttonClasses ""}} button"
    {{action "customButtonAction" customButton.buttonAction}}>
    {{if customButton.buttonName customButton.buttonName (t "components.olv-toolbar.custom-button-text")}}
  </button>
{{/each}}
<div class="olv-toolbar-info-modal-dialog ui small basic modal">
  <div class="ui icon header">
    <i class="olvt icon"></i>
    {{_infoModalDialogCaption}}
  </div>
  <div class="center aligned ui grid">
  <button class="ui icon button" {{action "copyJSONContent"}} id='OLVToolbarInfoCopyButton'>
      <i class="copy icon"></i>
      {{t "components.olv-toolbar.copy"}}
    </button>
    <div class="actions">
    <div class="olv-toolbar-info-modal-dialog-ok-button ui approve green inverted button" >
        <i class="remove icon"></i>
        {{t "components.olv-toolbar.close"}}
      </div>
    </div>
  </div>
  <div class="ui form">
    <div class="olv-toolbar-info-modal-dialog-content center aligned ui field">
      <textarea id='OLVToolbarInfoContent' cols='80' rows='20'>{{_infoModalDialogContent}}</textarea>
    </div>
  </div>

</div>

{{#if errorMessages}}
  {{#each errorMessages as |currentError|}}
    {{ui-message
      type='error'
      closeable=true
      visible=true
      title='Error occurred'
      message=currentError
    }}
  {{/each}}
{{/if}}
<table class="object-list-view ui unstackable celled {{if readonly 'readonly'}} {{tableClass}} table">
  <thead>
    <tr>
      <th class="object-list-view-operations collapsing {{unless showHelperColumn 'hidden'}}" data-olv-header-property-name="OlvRowToolbar"></th>
        {{#each columns as |column|}}
          {{component headerCellComponent.componentName
            column=column
            dynamicProperties=headerCellComponent.componentProperties
          }}
        {{/each}}
      {{#if showMenuColumn}}
        <th class="object-list-view-menu collapsing" data-olv-header-property-name="OlvRowMenu"></th>
      {{/if}}
    </tr>
  </thead>
  <tbody>
    {{#if showFilters}}
      <tr>
        <td rowspan="2" class="{{unless (and showHelperColumn hasContent) 'hidden'}}"></td>
        {{#each columns as |column|}}
          <td>
            {{#if column.filter.conditions}}
              {{component "flexberry-dropdown"
                value=column.filter.condition
                items=column.filter.conditions
                class="compact fluid"
                placeholder=""
                needChecksOnValue=false
              }}
            {{/if}}
          </td>
        {{/each}}
        {{#if showMenuColumn}}
          <td rowspan="2"></td>
        {{/if}}
      </tr>
      <tr>
        {{#each columns as |column|}}
          <td>
            {{#if column.filter.component.name}}
              {{component column.filter.component.name
                value=column.filter.pattern
                dynamicProperties=column.filter.component.properties
              }}
            {{/if}}
          </td>
        {{/each}}
      </tr>
    {{/if}}
    {{#unless hasContent}}
      <tr>
        <td colspan="{{colspan}}" style="text-align:center;">{{placeholder}}</td>
      </tr>
    {{/unless}}
    {{#each contentWithKeys key="key" as |record|}}
    <tr class="{{record.rowConfig.customClass}}">
      <td class="object-list-view-helper-column {{unless showHelperColumn "hidden"}}">
        <div class="hidden">{{record.key}}</div>
        {{#if showHelperColumn}}
          <div class="object-list-view-helper-column-cell">
            {{#if showAsteriskInRow}}
              <div class="cell">
                <i class="asterisk small red icon {{unless record.data.hasDirtyAttributes "transparent"}}"></i>
              </div>
            {{/if}}
            {{#if showCheckBoxInRow}}
              <div class="cell">
                {{flexberry-checkbox
                  readonly=(or readonly (not record.rowConfig.canBeSelected))
                  onChange=(action "selectRow" record)
                }}
              </div>
            {{/if}}
            {{#if showDeleteButtonInRow}}
              <div class="cell">
                <button class="ui {{buttonClass}} {{if (or readonly (not record.rowConfig.canBeDeleted)) "disabled"}} button" {{action "deleteRow" record}}>
                  <i class="minus icon"></i>
                </button>
              </div>
            {{/if}}
          </div>
        {{/if}}
      </td>
      {{#each columns as |column index|}}
        <td {{action "rowClick" record preventDefault=false}}>
          {{#if (and (not index) inHierarchicalMode)}}
            {{hierarchicalIndent}}
            {{#if hasRecords}}
              <button class="ui button icon mini {{buttonClass}}" {{action "expand" bubbles=false}}>
                <i class="{{if _expanded "minus" "plus"}} icon"></i>
              </button>
            {{/if}}
          {{/if}}
            <div class="oveflow-text">{{get record.data column.propName}}</div>
        </td>
      {{/each}}
      {{#if showMenuColumn}}
        <td class="object-list-view-menu">
          {{flexberry-menu
            class="basic right pointing"
            callItemsOnClickCallbacks=false
            configurateItems=(action "menuInRowConfigurateItems" record)
            onItemClick=(action "menuInRowItemClick" record)
          }}
        </td>
      {{/if}}
    </tr>
    {{#if (and _expanded inHierarchicalMode)}}
      {{#each records key="key" as |record|}}
        {{object-list-view-row
          record=record
          columns=columns
          readonly=readonly
          required=required
          showMenuColumn=showMenuColumn
          showHelperColumn=showHelperColumn
          defaultRowConfig=defaultRowConfig
          showAsteriskInRow=showAsteriskInRow
          showCheckBoxInRow=showCheckBoxInRow
          showDeleteButtonInRow=showDeleteButtonInRow
          inHierarchicalMode=inHierarchicalMode
          loadRecords=loadRecords
          rowClick=rowClick
          selectRow=selectRow
          deleteRow=deleteRow
          menuInRowItemClick=menuInRowItemClick
          menuInRowConfigurateItems=menuInRowConfigurateItems
          _currentLevel=_currentLevel
          hierarchicalIndent=_hierarchicalIndent
        }}
      {{/each}}
    {{/if}}
    {{/each}}
  </tbody>
</table>
{{#unless _inHierarchicalMode}}
  <div class="ui secondary menu no-margin">
    <div class="ui basic buttons">
      <button class="ui {{unless hasPreviousPage 'disabled'}} button" {{action (if this.attrs.previousPage this.attrs.previousPage 'previousPage')}}>&laquo;</button>
      {{#each pages as |page|}}
        {{#if page.isEllipsis}}
          <button class="ui button">...</button>
        {{else}}
          {{#if page.isCurrent}}
            <button class="ui active button">{{page.number}}</button>
          {{else}}
            <button class="ui button" {{action (if this.attrs.gotoPage this.attrs.gotoPage 'gotoPage') page.number}}>{{page.number}}</button>
          {{/if}}
        {{/if}}
      {{/each}}
      <button class="ui {{unless hasNextPage 'disabled'}} button" {{action (if this.attrs.nextPage this.attrs.nextPage 'nextPage')}}>&raquo;</button>
    </div>
    {{#if showShowingEntries}}
      <div class="item showing-entries">
      {{concat
        (t "components.flexberry-objectlistview.showing-entries.showing") currentIntervalRecords (t "components.flexberry-objectlistview.showing-entries.of") recordsTotalCount (t "components.flexberry-objectlistview.showing-entries.entries")
      }}
      </div>
    {{/if}}
    <div class="right menu">
      {{flexberry-dropdown items=perPageValues value=perPageValue class="compact selection"}}
    </div>
  </div>
{{/unless}}
